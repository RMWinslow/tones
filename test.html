

<!DOCTYPE html>

<html lang="en-US">
<!--
  Hullo! This webzone uses Patrick Marsceill's "Just the Docs" theme for Jekyll 
  https://pmarsceill.github.io/just-the-docs/
-->

  
<!--renders latex-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                  {left: "$$", right: "$$", display: true},
                  {left: "$", right: "$", display: false},
                  {left: "\\(", right: "\\)", display: false},
                  {left: "\\[", right: "\\]", display: true}
                ], trust: true,
            });
        });
    </script>


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>Home - Pure Tones</title>

    
  

  <link rel="shortcut icon" href="/tones/assets/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/tones/assets/css/compiled-jtd-style.css">

  

  
    <script type="text/javascript" src="/tones/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/tones/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Home | Pure Tones</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Home" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Interactive Tones widget, along with Jianpu-style musical scores." />
<meta property="og:description" content="Interactive Tones widget, along with Jianpu-style musical scores." />
<link rel="canonical" href="http://www.rmwinslow.com/tones/" />
<meta property="og:url" content="http://www.rmwinslow.com/tones/" />
<meta property="og:site_name" content="Pure Tones" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Home" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"Interactive Tones widget, along with Jianpu-style musical scores.","headline":"Home","name":"Pure Tones","url":"http://www.rmwinslow.com/tones/"}</script>
<!-- End Jekyll SEO tag -->


  <script>
//This script tries to build a keyboard that does a few things differently than what you can find online:
//- Firstly, It's designed directly as a kayboard kayboard, not trying to mimic a piano's layout
//- Secondly, the sounds are pure tones which are sustained as long as the key is held. Not glitchy midis.
//- Most keys on top rows (only b on the bottom), assuming you're in C major

//Here are some songs to play around with: https://noobnotes.net/browse/browse-songs-in-c-major/

//Praise be to http://marcgg.com/blog/2016/11/01/javascript-audio/
//Problems to fix:
//			[ ] fadeout is broken in firefox
//			[x] harmonics are clicky in chrome. Need to limit sound to fix that.

//--------------------------------------------------------------------------------------------------------------------------------------------------------

//These are used to only start the tone when the key is first pressed.
//Without these, holding a key will generate multiple osicillators.
keyflags = {}

// create web audio api context
var AudioContext = window.AudioContext || window.webkitAudioContext;
var ctx = new AudioContext();

//Here's the buckets where we hold onto the sounds.
oscillators = {};
gains = {};

//--------------------------------------------------------------------------------------------------------------------------------------------------------

//And here's the stuff that tells us what the frequency for each key is supposed to be.
//It also, incidentally, implicitly defines which keys to ignore.
//Change the tuning by changing the values of the row and column multipliers
//var principle = 132;

var rowMult = [2**(6/12),  2**(5/12),  1, 2**(-1/12)];
var colMult = [1, 2**(2/12), 2**(4/12), 2,  2*2**(2/12), 2*2**(4/12), 4,  4*2**(2/12), 4*2**(4/12), 8,  8*2**(2/12), 8*2**(4/12), 16, ];

var principle = 440;
NoteToFrequency_EqualTemperment = {
    A2: (1/4) * principle,
   bB2: (1/4) * principle * 2^(1/12),
    B2: (1/4) * principle * 2^(2/12),
    C2: (1/4) * principle * 2^(3/12),
   bD2: (1/4) * principle * 2^(4/12),
    D2: (1/4) * principle * 2^(5/12),
   bE2: (1/4) * principle * 2^(6/12),
    E2: (1/4) * principle * 2^(7/12),
    F2: (1/4) * principle * 2^(8/12),
   bG2: (1/4) * principle * 2^(9/12),
    G2: (1/4) * principle * 2^(10/12),
   bA2: (1/4) * principle * 2^(11/12),

    A3: (1/2) * principle,
   bB3: (1/2) * principle * 2^(1/12),
    B3: (1/2) * principle * 2^(2/12),
    C3: (1/2) * principle * 2^(3/12),
   bD3: (1/2) * principle * 2^(4/12),
    D3: (1/2) * principle * 2^(5/12),
   bE3: (1/2) * principle * 2^(6/12),
    E3: (1/2) * principle * 2^(7/12),
    F3: (1/2) * principle * 2^(8/12),
   bG3: (1/2) * principle * 2^(9/12),
    G3: (1/2) * principle * 2^(10/12),
   bA3: (1/2) * principle * 2^(11/12),
    
    A4: principle,
   bB4: principle * 2^(1/12),
    B4: principle * 2^(2/12),
    C4: principle * 2^(3/12),
   bD4: principle * 2^(4/12),
    D4: principle * 2^(5/12),
   bE4: principle * 2^(6/12),
    E4: principle * 2^(7/12),
    F4: principle * 2^(8/12),
   bG4: principle * 2^(9/12),
    G4: principle * 2^(10/12),
   bA4: principle * 2^(11/12),
    
    A5: 2 * principle,
   bB5: 2 * principle * 2^(1/12),
    B5: 2 * principle * 2^(2/12),
    C5: 2 * principle * 2^(3/12),
   bD5: 2 * principle * 2^(4/12),
    D5: 2 * principle * 2^(5/12),
   bE5: 2 *  principle * 2^(6/12),
    E5: 2 * principle * 2^(7/12),
    F5: 2 * principle * 2^(8/12),
   bG5: 2 * principle * 2^(9/12),
    G5: 2 * principle * 2^(10/12),
   bA5: 2 * principle * 2^(11/12),

    A6: 4 * principle,
   bB6: 4 * principle * 2^(1/12),
    B6: 4 * principle * 2^(2/12),
    C6: 4 * principle * 2^(3/12),
   bD6: 4 * principle * 2^(4/12),
    D6: 4 * principle * 2^(5/12),
   bE6: 4 * principle * 2^(6/12),
    E6: 4 * principle * 2^(7/12),
    F6: 4 * principle * 2^(8/12),
   bG6: 4 * principle * 2^(9/12),
    G6: 4 * principle * 2^(10/12),
   bA6: 4 * principle * 2^(11/12),

    A7: 8 * principle,
   bB7: 8 * principle * 2^(1/12),
    B7: 8 * principle * 2^(2/12),
    C7: 8 * principle * 2^(3/12),
   bD7: 8 * principle * 2^(4/12),
    D7: 8 * principle * 2^(5/12),
   bE7: 8 * principle * 2^(6/12),
    E7: 8 * principle * 2^(7/12),
    F7: 8 * principle * 2^(8/12),
   bG7: 8 * principle * 2^(9/12),
    G7: 8 * principle * 2^(10/12),
   bA7: 8 * principle * 2^(11/12),
}

KeyToNote_12KeyErgonomic = {
    Digit1: principle * rowMult[0] * colMult[0] * 2^(-4/12),
    Digit2: principle * rowMult[0] * colMult[0],
    Digit3: principle * rowMult[0] * colMult[1],
    Digit4: principle * rowMult[0] * colMult[2],
    Digit5: principle * rowMult[0] * colMult[3],
    Digit6: principle * rowMult[0] * colMult[4],
    Digit7: principle * rowMult[0] * colMult[5],
    Digit8: principle * rowMult[0] * colMult[6],
    Digit9: principle * rowMult[0] * colMult[7],
    Digit0: principle * rowMult[0] * colMult[8],
    Minus: principle * rowMult[0] * colMult[9],
    Equal: principle * rowMult[0] * colMult[10],
    Backspace: principle * rowMult[0] * colMult[11],
    
    KeyQ: principle * rowMult[1] * colMult[0],
    KeyW: principle * rowMult[1] * colMult[1],
    KeyE: principle * rowMult[1] * colMult[2],
    KeyR: principle * rowMult[1] * colMult[3],
    KeyT: principle * rowMult[1] * colMult[4],
    KeyY: principle * rowMult[1] * colMult[5],
    KeyU: principle * rowMult[1] * colMult[6],
    KeyI: principle * rowMult[1] * colMult[7],
    KeyO: principle * rowMult[1] * colMult[8],
    KeyP: principle * rowMult[1] * colMult[9],
    BracketLeft: principle * rowMult[1] * colMult[10],
    BracketRight: principle * rowMult[1] * colMult[11],
    Backslash: principle * rowMult[1] * colMult[12],
    
    KeyA: principle * rowMult[2] * colMult[0],
    KeyS: principle * rowMult[2] * colMult[1],
    KeyD: principle * rowMult[2] * colMult[2],
    KeyF: principle * rowMult[2] * colMult[3],
    KeyG: principle * rowMult[2] * colMult[4],
    KeyH: principle * rowMult[2] * colMult[5],
    KeyJ: principle * rowMult[2] * colMult[6],
    KeyK: principle * rowMult[2] * colMult[7],
    KeyL: principle * rowMult[2] * colMult[8],
    Semicolon: principle * rowMult[2] * colMult[9],
    Quote: principle * rowMult[2] * colMult[10],
    Enter: principle * rowMult[2] * colMult[11],
    
    //Last row tweaked to make the B line up properly.
    ShiftLeft: principle * rowMult[3] * colMult[0],
    KeyZ: principle * rowMult[3] * colMult[1],
    KeyX: principle * rowMult[3] * colMult[2],
    KeyC: principle * rowMult[3] * colMult[3],
    KeyV: principle * rowMult[3] * colMult[4],
    KeyB: principle * rowMult[3] * colMult[5],
    KeyN: principle * rowMult[3] * colMult[6],
    KeyM: principle * rowMult[3] * colMult[7],
    Comma: principle * rowMult[3] * colMult[8],
    Period: principle * rowMult[3] * colMult[9],
    Slash: principle * rowMult[3] * colMult[10],
    ShiftRight: principle * rowMult[3] * colMult[11], 
    
    Numpad0: principle * rowMult[3] * colMult[6],
    Numpad4: principle * rowMult[1] * colMult[6],
    Numpad5: principle * rowMult[1] * colMult[7],
    Numpad6: principle * rowMult[1] * colMult[8],
    Numpad1: principle * rowMult[2] * colMult[6],
    Numpad2: principle * rowMult[2] * colMult[7],
    Numpad3: principle * rowMult[2] * colMult[8],
    NumpadEnter: principle * rowMult[3] * colMult[9],
    Numpad7: principle * rowMult[2] * colMult[9],
    Numpad8: principle * rowMult[2] * colMult[10],
    Numpad9: principle * rowMult[2] * colMult[11],
};



tones = {
	Digit1: principle * rowMult[0] * colMult[0] * 2^(-4/12),
	Digit2: principle * rowMult[0] * colMult[0],
	Digit3: principle * rowMult[0] * colMult[1],
	Digit4: principle * rowMult[0] * colMult[2],
	Digit5: principle * rowMult[0] * colMult[3],
	Digit6: principle * rowMult[0] * colMult[4],
	Digit7: principle * rowMult[0] * colMult[5],
	Digit8: principle * rowMult[0] * colMult[6],
	Digit9: principle * rowMult[0] * colMult[7],
	Digit0: principle * rowMult[0] * colMult[8],
	Minus: principle * rowMult[0] * colMult[9],
	Equal: principle * rowMult[0] * colMult[10],
	Backspace: principle * rowMult[0] * colMult[11],
	
	KeyQ: principle * rowMult[1] * colMult[0],
	KeyW: principle * rowMult[1] * colMult[1],
	KeyE: principle * rowMult[1] * colMult[2],
	KeyR: principle * rowMult[1] * colMult[3],
	KeyT: principle * rowMult[1] * colMult[4],
	KeyY: principle * rowMult[1] * colMult[5],
	KeyU: principle * rowMult[1] * colMult[6],
	KeyI: principle * rowMult[1] * colMult[7],
	KeyO: principle * rowMult[1] * colMult[8],
	KeyP: principle * rowMult[1] * colMult[9],
	BracketLeft: principle * rowMult[1] * colMult[10],
	BracketRight: principle * rowMult[1] * colMult[11],
	Backslash: principle * rowMult[1] * colMult[12],
	
	KeyA: principle * rowMult[2] * colMult[0],
	KeyS: principle * rowMult[2] * colMult[1],
	KeyD: principle * rowMult[2] * colMult[2],
	KeyF: principle * rowMult[2] * colMult[3],
	KeyG: principle * rowMult[2] * colMult[4],
	KeyH: principle * rowMult[2] * colMult[5],
	KeyJ: principle * rowMult[2] * colMult[6],
	KeyK: principle * rowMult[2] * colMult[7],
	KeyL: principle * rowMult[2] * colMult[8],
	Semicolon: principle * rowMult[2] * colMult[9],
	Quote: principle * rowMult[2] * colMult[10],
	Enter: principle * rowMult[2] * colMult[11],
	
	//Last row tweaked to make the B line up properly.
	ShiftLeft: principle * rowMult[3] * colMult[0],
	KeyZ: principle * rowMult[3] * colMult[1],
	KeyX: principle * rowMult[3] * colMult[2],
	KeyC: principle * rowMult[3] * colMult[3],
	KeyV: principle * rowMult[3] * colMult[4],
	KeyB: principle * rowMult[3] * colMult[5],
	KeyN: principle * rowMult[3] * colMult[6],
	KeyM: principle * rowMult[3] * colMult[7],
	Comma: principle * rowMult[3] * colMult[8],
	Period: principle * rowMult[3] * colMult[9],
	Slash: principle * rowMult[3] * colMult[10],
	ShiftRight: principle * rowMult[3] * colMult[11], 
	
	Numpad0: principle * rowMult[3] * colMult[6],
	Numpad4: principle * rowMult[1] * colMult[6],
	Numpad5: principle * rowMult[1] * colMult[7],
	Numpad6: principle * rowMult[1] * colMult[8],
	Numpad1: principle * rowMult[2] * colMult[6],
	Numpad2: principle * rowMult[2] * colMult[7],
	Numpad3: principle * rowMult[2] * colMult[8],
	NumpadEnter: principle * rowMult[3] * colMult[9],
	Numpad7: principle * rowMult[2] * colMult[9],
	Numpad8: principle * rowMult[2] * colMult[10],
	Numpad9: principle * rowMult[2] * colMult[11],
};


//-------------------------------------------------------------------------------------------------------------------------------------------------------

window.onkeydown = function(event){ 								//Whenever a key is pressed:						
	keycode = event.code;
	
	if (keycode == "Tab"){return 0};
	
	if (! keyflags[keycode] && tones[keycode]){								//If the key is part of the piano, and isn't just being held down:
		console.log("DOWN "+keycode+": "+tones[keycode]+" Hz");						//Log which key is pressed
		keyflags[keycode] = 1;														//Set a flag to indicate this key is being held down.
		
		oscillators[keycode] = ctx.createOscillator();								//Create a sine wave
		oscillators[keycode].frequency.value = tones[keycode];						//Change the frequency 
		gains[keycode] = ctx.createGain();											//Create volume control so we can fade it out.
		oscillators[keycode].connect(gains[keycode]);								//Plug the sine wave into the volume control
		gains[keycode].connect(ctx.destination);									//plug the volume control into the speakers
		
		oscillators[keycode].start(0);												//Start playing the sound.
		gains[keycode].gain.value = 0.1;											//But keep it quiet so it doesn't blow out the speakers.
												
	}
}; 

window.onkeyup = function(event){ 									//Whenever a key is released:	
	keycode = event.code;									
	if (tones[keycode]){													//If the key is part of the piano:
		console.log("UP " + keycode);												//Log which key is let up.
		keyflags[keycode] = 0;														//Remove it's flag to indicate that it isn't being held down anymore.
		
		gains[keycode].gain.value = 0.1;											//restablish the volume level or else it will make clicky sounds
		gains[keycode].gain.exponentialRampToValueAtTime(0.000001, ctx.currentTime+0.4);//fade it out (also to prevent clicky sounds)
		oscillators[keycode].stop(ctx.currentTime + 0.5);							//Stop playing the sound.
		
	}
}; 
</script>


</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="http://www.rmwinslow.com/tones/" class="site-title lh-tight">
  Pure Tones

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <p>This is a test. Just putting stuff here.</p>

        <fieldset>
            <legend>Select a maintenance drone:</legend>

            <div>
            <input type="radio" id="huey" name="drone" value="huey"
                    checked>
            <label for="huey">Huey</label>
            </div>

            <div>
            <input type="radio" id="dewey" name="drone" value="dewey">
            <label for="dewey">Dewey</label>
            </div>

            <div>
            <input type="radio" id="louie" name="drone" value="louie">
            <label for="louie">Louie</label>
            </div>
        </fieldset>


        <hr>

      
    </nav>
    <footer class="site-footer">
      
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
           
    </div>
    
    
    
    <div id="main-content-wrap" class="main-content-wrap">
      
    
      
      
      
      
      
      
      
      
      
      <div id="main-content" class="main-content" role="main">
        
          <p>There are lots of online keyboard pianos out there, but I wanted one where:</p>

<ol>
  <li>The sounds are pure tones - sine waves - so I can play around with harmonics.</li>
  <li>The sounds are sustained as long as the key is held down.</li>
  <li>The notes are laid out in a way that “feels right” on a qwerty keyboard, instead of just trying to copy the layout of a piano.</li>
</ol>

<p><img src="/tones/img/kb-notes.svg" alt="An svg depicting a qwerty keyboard, color-coded and labelled to show what note each button plays." /></p>

<p>Keyboard svg modified from <a href="https://commons.wikimedia.org/wiki/File:ANSI_US_QWERTY_(Windows)_Enter_Return.svg">here</a>.</p>

<p>This works best in Chrome, using a keyboard with n-key rollover.</p>

        

        

        
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
</body>
</html>


